(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[419],{4517:(e,a,t)=>{Promise.resolve().then(t.bind(t,4791))},4791:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>o});var s=t(5155),l=t(2115);let n="localhost"===window.location.hostname?"http://localhost:8080":"";function o(){var e;let[a,t]=(0,l.useState)([]),[o,r]=(0,l.useState)([]),[c,i]=(0,l.useState)(!1),[d,m]=(0,l.useState)(!1),[u,h]=(0,l.useState)(null),[x,b]=(0,l.useState)(null),[p,g]=(0,l.useState)(!1),[j,N]=(0,l.useState)({nome:"",turma:"",matricula:"",status:""});(0,l.useEffect)(()=>{fetch("".concat(n,"/api/alunos")).then(e=>e.json()).then(e=>{t(e.map(e=>{if(e.dataNascimento&&e.dataNascimento.includes("-")){let[a,t,s]=e.dataNascimento.split("-");e.dataNascimento="".concat(s,"/").concat(t,"/").concat(a)}return e}))}).catch(console.error),fetch("".concat(n,"/api/status")).then(e=>e.json()).then(r).catch(console.error)},[]);let f=e=>{e?(h(e),m(!1)):(h({nome:"",turma:"",matricula:""}),m(!0)),i(!0)},v=async()=>{var e;if(!u)return;let a={...u};if(null==(e=a.dataNascimento)?void 0:e.includes("/")){let[e,t,s]=a.dataNascimento.split("/");a.dataNascimento="".concat(s,"-").concat(t,"-").concat(e)}let s=u.id?"PUT":"POST",l=u.id?"".concat(n,"/api/alunos/").concat(u.id):"".concat(n,"/api/alunos");try{if(!(await fetch(l,{method:s,headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok)throw Error("Erro ao salvar aluno");b(u.id?"✅ Aluno atualizado com sucesso!":"\uD83C\uDF89 Aluno cadastrado com sucesso!"),i(!1);let e=(await fetch("".concat(n,"/api/alunos")).then(e=>e.json())).map(e=>{if(e.dataNascimento&&e.dataNascimento.includes("-")){let[a,t,s]=e.dataNascimento.split("-");e.dataNascimento="".concat(s,"/").concat(t,"/").concat(a)}return e});t(e),setTimeout(()=>b(null),4e3)}catch(e){console.error(e)}},w=a.filter(e=>{var a,t,s,l;return(null==(a=e.nome)?void 0:a.toLowerCase().includes(j.nome.toLowerCase()))&&(null==(t=e.turma)?void 0:t.toLowerCase().includes(j.turma.toLowerCase()))&&(null==(s=e.matricula)?void 0:s.toLowerCase().includes(j.matricula.toLowerCase()))&&(""===j.status||(null==(l=e.status)?void 0:l.descricao)===j.status)});return(0,s.jsxs)("main",{className:"p-10 font-sans min-h-screen bg-gradient-to-br from-gray-50 to-blue-50",children:[(0,s.jsxs)("div",{className:"max-w-6xl mx-auto bg-white rounded-2xl shadow-lg overflow-hidden",children:[(0,s.jsxs)("header",{className:"bg-blue-600 text-white p-6 flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold tracking-wide",children:"\uD83D\uDCDA Lista de Alunos"}),(0,s.jsx)("button",{onClick:()=>f(),className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-md transition-all",children:"+ Cadastrar Aluno"})]}),x&&(0,s.jsx)("div",{className:"text-center bg-green-100 text-green-700 py-2 font-medium",children:x}),(0,s.jsxs)("div",{className:"grid grid-cols-4 gap-4 p-4 bg-blue-50 border-b",children:[(0,s.jsx)("input",{placeholder:"Filtrar por nome",className:"p-2 rounded border",value:j.nome,onChange:e=>N({...j,nome:e.target.value})}),(0,s.jsx)("input",{placeholder:"Filtrar por turma",className:"p-2 rounded border",value:j.turma,onChange:e=>N({...j,turma:e.target.value})}),(0,s.jsx)("input",{placeholder:"Filtrar por matr\xedcula",className:"p-2 rounded border",value:j.matricula,onChange:e=>N({...j,matricula:e.target.value})}),(0,s.jsxs)("select",{className:"p-2 rounded border",value:j.status,onChange:e=>N({...j,status:e.target.value}),children:[(0,s.jsx)("option",{value:"",children:"Todos os Status"}),o.map(e=>(0,s.jsx)("option",{value:e.descricao,children:e.descricao},e.id))]})]}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full border-collapse",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-blue-100 text-blue-800",children:[(0,s.jsx)("th",{className:"p-4 text-left text-sm font-semibold",children:"ID"}),(0,s.jsx)("th",{className:"p-4 text-left text-sm font-semibold",children:"Nome"}),(0,s.jsx)("th",{className:"p-4 text-left text-sm font-semibold",children:"Turma"}),(0,s.jsx)("th",{className:"p-4 text-left text-sm font-semibold",children:"Respons\xe1vel"}),(0,s.jsx)("th",{className:"p-4 text-left text-sm font-semibold",children:"Matr\xedcula"}),(0,s.jsx)("th",{className:"p-4 text-left text-sm font-semibold",children:"Status"}),(0,s.jsx)("th",{className:"p-4 text-center text-sm font-semibold",children:"A\xe7\xf5es"})]})}),(0,s.jsx)("tbody",{children:w.map((e,a)=>{var t;return(0,s.jsxs)("tr",{className:"transition-colors ".concat(a%2==0?"bg-white":"bg-blue-50"," hover:bg-blue-100"),children:[(0,s.jsx)("td",{className:"p-4",children:e.id}),(0,s.jsx)("td",{className:"p-4",children:e.nome}),(0,s.jsx)("td",{className:"p-4",children:e.turma}),(0,s.jsx)("td",{className:"p-4",children:e.responsavelPedagogico}),(0,s.jsx)("td",{className:"p-4",children:e.matricula}),(0,s.jsx)("td",{className:"p-4",children:(null==(t=e.status)?void 0:t.descricao)||"—"}),(0,s.jsx)("td",{className:"p-4 text-center",children:(0,s.jsx)("button",{onClick:()=>f(e),className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded-md transition-all",children:"Visualizar"})})]},e.id)})})]})})]}),c&&u&&(0,s.jsx)("div",{className:"fixed inset-0 bg-gray-200/40 backdrop-blur-sm flex items-center justify-center transition-all duration-300",children:(0,s.jsxs)("div",{className:"bg-white w-[900px] rounded-xl shadow-2xl p-8 max-h-[90vh] overflow-y-auto border border-gray-100",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-6 text-blue-700",children:"\uD83E\uDDFE Dados do Aluno"}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-8",children:[(0,s.jsxs)("div",{className:"col-span-1 flex flex-col items-center",children:[(0,s.jsx)("div",{className:"w-40 h-40 bg-gray-200 rounded-full mb-4 flex items-center justify-center text-gray-500",children:"Foto"}),(0,s.jsx)("h3",{className:"font-semibold text-lg",children:u.nome}),(0,s.jsx)("p",{className:"text-gray-600",children:u.dataNascimento?(()=>{let[e,a,t]=u.dataNascimento.split("/"),s=new Date(+t,a-1,+e),l=new Date,n=l.getFullYear()-s.getFullYear(),o=l.getMonth()-s.getMonth();return o<0&&(n--,o+=12),"".concat(n," ano").concat(1!==n?"s":""," e ").concat(o," m\xeas").concat(1!==o?"es":"")})():"Idade n\xe3o informada"})]}),(0,s.jsxs)("div",{className:"col-span-2 space-y-6",children:[(0,s.jsxs)("section",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-blue-600 mb-2",children:"Informa\xe7\xf5es do Aluno"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Nome"}),(0,s.jsx)("input",{className:"p-2 border rounded w-full",value:u.nome||"",disabled:!d,onChange:e=>h({...u,nome:e.target.value})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Data de nascimento"}),(0,s.jsx)("input",{className:"p-2 border rounded w-full",value:u.dataNascimento||"",disabled:!d,onChange:e=>{let a=e.target.value.replace(/\D/g,"");a.length>8&&(a=a.slice(0,8)),a.length>=5?a="".concat(a.slice(0,2),"/").concat(a.slice(2,4),"/").concat(a.slice(4)):a.length>=3&&(a="".concat(a.slice(0,2),"/").concat(a.slice(2))),h({...u,dataNascimento:a})}})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Matr\xedcula"}),(0,s.jsx)("input",{className:"p-2 border rounded w-full",value:u.matricula||"",disabled:!d,onChange:e=>h({...u,matricula:e.target.value})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Status"}),(0,s.jsxs)("select",{className:"p-2 border rounded w-full",value:(null==(e=u.status)?void 0:e.id)||"",disabled:!d,onChange:e=>{let a=o.find(a=>a.id===Number(e.target.value));h({...u,status:a})},children:[(0,s.jsx)("option",{value:"",children:"Selecione o status"}),o.map(e=>(0,s.jsx)("option",{value:e.id,children:e.descricao},e.id))]})]})]})]}),(0,s.jsxs)("section",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-blue-600 mb-2",children:"Acad\xeamico"}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-3",children:[{key:"turma",label:"Turma"},{key:"periodo",label:"Per\xedodo"},{key:"ano",label:"Ano"},{key:"horario",label:"Hor\xe1rio"},{key:"professora",label:"Professora"},{key:"auxiliar",label:"Auxiliar"}].map(e=>{let{key:a,label:t}=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:t}),(0,s.jsx)("input",{className:"p-2 border rounded w-full",value:"string"==typeof u[a]||"number"==typeof u[a]?u[a]:"",disabled:!d,onChange:e=>h({...u,[a]:e.target.value})})]},a)})})]}),(0,s.jsxs)("section",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-blue-600 mb-2",children:"Respons\xe1vel Pedag\xf3gico"}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-3",children:[{key:"responsavelPedagogico",label:"Nome"},{key:"parentesco",label:"Parentesco"},{key:"emailResponsavel",label:"E-mail"},{key:"telefone1",label:"Telefone 1"},{key:"telefone2",label:"Telefone 2"}].map(e=>{let{key:a,label:t}=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:t}),(0,s.jsx)("input",{className:"p-2 border rounded w-full",value:"string"==typeof u[a]||"number"==typeof u[a]?u[a]:"",disabled:!d,onChange:e=>h({...u,[a]:e.target.value})})]},a)})})]}),(0,s.jsxs)("div",{className:"flex justify-between mt-6",children:[d?(0,s.jsx)("button",{onClick:v,className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-md",children:"Salvar"}):(0,s.jsx)("button",{onClick:()=>m(!0),className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md",children:"Editar"}),(0,s.jsx)("button",{onClick:()=>i(!1),className:"bg-gray-400 hover:bg-gray-500 text-white px-4 py-2 rounded-md",children:"Fechar"})]})]})]})]})})]})}}},e=>{e.O(0,[441,255,358],()=>e(e.s=4517)),_N_E=e.O()}]);