(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[129],{1751:(e,t,a)=>{Promise.resolve().then(a.bind(a,1961))},1961:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var l=a(5155),s=a(2115);let o="localhost"===window.location.hostname?"http://localhost:8080":"";function n(){let[e,t]=(0,s.useState)([]),[a,n]=(0,s.useState)(!1),[r,i]=(0,s.useState)(!1),[c,d]=(0,s.useState)(null),[u,m]=(0,s.useState)(null),[x,h]=(0,s.useState)(!1),[p,b]=(0,s.useState)({nome:"",curso:"",turno:"",situacao:""}),g=e=>{if(!e)return"";if(e.includes("/"))return e;let[t,a,l]=e.split("-");return t&&a&&l?"".concat(l,"/").concat(a,"/").concat(t):e},j=e=>e.map(e=>({...e,inicio:g(e.inicio),termino:g(e.termino)}));(0,s.useEffect)(()=>{fetch("".concat(o,"/api/turmas")).then(e=>e.json()).then(e=>t(j(e))).catch(console.error)},[]);let v=e=>{e?(d(e),i(!1)):(d({nome:"",nomeResumido:"",curso:"",periodo:"",situacao:"",turno:"",maximoAlunos:void 0,inicio:"",termino:""}),i(!0)),n(!0)},N=async()=>{t(j(await fetch("".concat(o,"/api/turmas")).then(e=>e.json())))},[f,y]=(0,s.useState)(null),w=async()=>{if(!c)return;if(!c.nome||""===c.nome.trim())return void y("O nome da turma \xe9 obrigat\xf3rio.");y(null);let e=e=>null==e||""===e.trim()?null:e,t={id:c.id,nome:e(c.nome),nomeResumido:e(c.nomeResumido),curso:e(c.curso),periodo:e(c.periodo),situacao:e(c.situacao),turno:e(c.turno),maximoAlunos:void 0===c.maximoAlunos||null===c.maximoAlunos||Number.isNaN(c.maximoAlunos)?null:Number(c.maximoAlunos),inicio:e(c.inicio),termino:e(c.termino)},a=c.id?"PUT":"POST",l=c.id?"".concat(o,"/api/turmas/").concat(c.id):"".concat(o,"/api/turmas");try{let e=await fetch(l,{method:a,headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t)});if(!e.ok){let t=await e.text();throw console.error("Erro salvar turma:",e.status,t),Error("Erro ao salvar turma")}m(c.id?"✅ Turma atualizada com sucesso!":"\uD83C\uDF89 Turma criada com sucesso!"),n(!1),await N(),setTimeout(()=>m(null),4e3)}catch(e){console.error(e)}},C=async()=>{if(null==c?void 0:c.id)try{if(!(await fetch("".concat(o,"/api/turmas/").concat(c.id),{method:"DELETE"})).ok)throw Error("Erro ao excluir turma");m("\uD83D\uDDD1️ Turma exclu\xedda com sucesso!"),h(!1),n(!1),await N(),setTimeout(()=>m(null),4e3)}catch(e){console.error(e)}},k=e.filter(e=>(e.nome||"").toLowerCase().includes(p.nome.toLowerCase())&&(e.curso||"").toLowerCase().includes(p.curso.toLowerCase())&&(""===p.turno||(e.turno||"")===p.turno)&&(""===p.situacao||(e.situacao||"")===p.situacao));return(0,l.jsxs)("main",{className:"p-10 font-sans min-h-screen bg-gradient-to-br from-gray-50 to-blue-50",children:[(0,l.jsxs)("div",{className:"max-w-7xl mx-auto bg-white rounded-2xl shadow-lg overflow-hidden",children:[(0,l.jsxs)("header",{className:"bg-blue-600 text-white p-6 flex justify-between items-center",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold tracking-wide",children:"\uD83C\uDFEB Turmas"}),(0,l.jsx)("button",{onClick:()=>v(),className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-md transition-all",children:"+ Nova Turma"})]}),u&&(0,l.jsx)("div",{className:"text-center bg-green-100 text-green-700 py-2 font-medium",children:u}),(0,l.jsxs)("div",{className:"grid grid-cols-4 gap-4 p-4 bg-blue-50 border-b",children:[(0,l.jsx)("input",{placeholder:"Filtrar por nome",className:"p-2 rounded border",value:p.nome,onChange:e=>b({...p,nome:e.target.value})}),(0,l.jsx)("input",{placeholder:"Filtrar por curso",className:"p-2 rounded border",value:p.curso,onChange:e=>b({...p,curso:e.target.value})}),(0,l.jsxs)("select",{className:"p-2 rounded border bg-white",value:p.turno,onChange:e=>b({...p,turno:e.target.value}),children:[(0,l.jsx)("option",{value:"",children:"Filtrar por turno"}),(0,l.jsx)("option",{value:"Matutino",children:"Matutino"}),(0,l.jsx)("option",{value:"Vespertino",children:"Vespertino"}),(0,l.jsx)("option",{value:"Integral",children:"Integral"})]}),(0,l.jsxs)("select",{className:"p-2 rounded border bg-white",value:p.situacao,onChange:e=>b({...p,situacao:e.target.value}),children:[(0,l.jsx)("option",{value:"",children:"Filtrar por situa\xe7\xe3o"}),(0,l.jsx)("option",{value:"Vigente",children:"Vigente"}),(0,l.jsx)("option",{value:"Encerrada",children:"Encerrada"}),(0,l.jsx)("option",{value:"Planejada",children:"Planejada"}),(0,l.jsx)("option",{value:"Cancelada",children:"Cancelada"})]})]}),(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"min-w-full border-collapse",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"bg-blue-100 text-blue-800",children:[(0,l.jsx)("th",{className:"p-3 text-left text-sm font-semibold",children:"Nome"}),(0,l.jsx)("th",{className:"p-3 text-left text-sm font-semibold",children:"Nome Resumido"}),(0,l.jsx)("th",{className:"p-3 text-left text-sm font-semibold",children:"Curso"}),(0,l.jsx)("th",{className:"p-3 text-left text-sm font-semibold",children:"Per\xedodo"}),(0,l.jsx)("th",{className:"p-3 text-left text-sm font-semibold",children:"Situa\xe7\xe3o"}),(0,l.jsx)("th",{className:"p-3 text-left text-sm font-semibold",children:"Turno"}),(0,l.jsx)("th",{className:"p-3 text-left text-sm font-semibold",children:"M\xe1x. de Alunos"}),(0,l.jsx)("th",{className:"p-3 text-left text-sm font-semibold",children:"In\xedcio"}),(0,l.jsx)("th",{className:"p-3 text-left text-sm font-semibold",children:"T\xe9rmino"}),(0,l.jsx)("th",{className:"p-3 text-center text-sm font-semibold",children:"A\xe7\xf5es"})]})}),(0,l.jsxs)("tbody",{children:[k.map((e,t)=>{var a;return(0,l.jsxs)("tr",{className:"transition-colors ".concat(t%2==0?"bg-white":"bg-blue-50"," hover:bg-blue-100"),children:[(0,l.jsx)("td",{className:"p-3",children:e.nome}),(0,l.jsx)("td",{className:"p-3",children:e.nomeResumido||"—"}),(0,l.jsx)("td",{className:"p-3",children:e.curso||"—"}),(0,l.jsx)("td",{className:"p-3",children:e.periodo||"—"}),(0,l.jsx)("td",{className:"p-3",children:e.situacao||"—"}),(0,l.jsx)("td",{className:"p-3",children:e.turno||"—"}),(0,l.jsx)("td",{className:"p-3",children:null!=(a=e.maximoAlunos)?a:"—"}),(0,l.jsx)("td",{className:"p-3",children:e.inicio||"—"}),(0,l.jsx)("td",{className:"p-3",children:e.termino||"—"}),(0,l.jsx)("td",{className:"p-3 text-center",children:(0,l.jsx)("button",{onClick:()=>v(e),className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded-md transition-all",children:"Visualizar"})})]},e.id)}),0===k.length&&(0,l.jsx)("tr",{children:(0,l.jsx)("td",{className:"p-4 text-center text-gray-500",colSpan:10,children:"Nenhuma turma encontrada."})})]})]})})]}),a&&c&&(0,l.jsx)("div",{className:"fixed inset-0 bg-gray-200/40 backdrop-blur-sm flex items-center justify-center transition-all duration-300",children:(0,l.jsxs)("div",{className:"bg-white w-[1000px] rounded-xl shadow-2xl p-8 max-h-[90vh] overflow-y-auto border border-gray-100",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-6 text-blue-700",children:"\uD83E\uDDFE Dados da Turma"}),f&&(0,l.jsx)("div",{className:"mb-4 rounded border border-red-300 bg-red-50 text-red-700 p-3 text-sm",children:f}),(0,l.jsx)("div",{className:"grid grid-cols-2 gap-6",children:[{label:"Nome",key:"nome",type:"text"},{label:"Nome Resumido",key:"nomeResumido",type:"text"},{label:"Curso",key:"curso",type:"text"},{label:"Per\xedodo",key:"periodo",type:"text"},{label:"Situa\xe7\xe3o",key:"situacao",type:"select-situacao"},{label:"Turno",key:"turno",type:"select-turno"},{label:"M\xe1ximo de alunos",key:"maximoAlunos",type:"number"},{label:"In\xedcio",key:"inicio",type:"datebr"},{label:"T\xe9rmino",key:"termino",type:"datebr"}].map(e=>{let{label:t,key:a,type:s}=e,o=c[a],n="";return n="number"===s?"number"==typeof o?o:"":String(null!=o?o:""),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1",children:t}),"select-turno"===s?(0,l.jsxs)("select",{className:"p-2 border rounded w-full bg-white",value:n,disabled:!r,onChange:e=>{d({...c,[a]:e.target.value})},children:[(0,l.jsx)("option",{value:"",children:"Selecione..."}),(0,l.jsx)("option",{value:"Matutino",children:"Matutino"}),(0,l.jsx)("option",{value:"Vespertino",children:"Vespertino"}),(0,l.jsx)("option",{value:"Integral",children:"Integral"})]}):"select-situacao"===s?(0,l.jsxs)("select",{className:"p-2 border rounded w-full bg-white",value:n,disabled:!r,onChange:e=>{d({...c,[a]:e.target.value})},children:[(0,l.jsx)("option",{value:"",children:"Selecione..."}),(0,l.jsx)("option",{value:"Vigente",children:"Vigente"}),(0,l.jsx)("option",{value:"Encerrada",children:"Encerrada"}),(0,l.jsx)("option",{value:"Planejada",children:"Planejada"}),(0,l.jsx)("option",{value:"Cancelada",children:"Cancelada"})]}):(0,l.jsx)("input",{type:"number"===s?"number":"text",className:"p-2 border rounded w-full",value:n,disabled:!r,onChange:e=>{let t=e.target.value;if("number"===s)t=""===e.target.value?void 0:Number(e.target.value);else{let a;"datebr"===s&&((a=e.target.value.replace(/\D/g,"")).length>8&&(a=a.slice(0,8)),a.length>=5?a="".concat(a.slice(0,2),"/").concat(a.slice(2,4),"/").concat(a.slice(4)):a.length>=3&&(a="".concat(a.slice(0,2),"/").concat(a.slice(2))),t=a)}d({...c,[a]:t})}})]},a)})}),(0,l.jsxs)("div",{className:"flex justify-between mt-8",children:[(0,l.jsx)("div",{className:"flex gap-3",children:r?(0,l.jsx)("button",{onClick:w,className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-md",children:"Salvar"}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("button",{onClick:()=>i(!0),className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md",children:"Editar"}),(0,l.jsx)("button",{onClick:()=>h(!0),className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-md",children:"Excluir"})]})}),(0,l.jsx)("button",{onClick:()=>n(!1),className:"bg-gray-400 hover:bg-gray-500 text-white px-4 py-2 rounded-md",children:"Fechar"})]})]})}),x&&(0,l.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black/40 z-50",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-lg text-center w-96",children:[(0,l.jsxs)("h3",{className:"text-lg font-semibold mb-4",children:["Deseja realmente excluir a turma ",(0,l.jsx)("br",{}),(0,l.jsx)("span",{className:"font-bold text-red-600",children:null==c?void 0:c.nome}),"?"]}),(0,l.jsxs)("div",{className:"flex justify-center gap-4 mt-6",children:[(0,l.jsx)("button",{onClick:C,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-md",children:"Sim, excluir"}),(0,l.jsx)("button",{onClick:()=>h(!1),className:"bg-gray-300 hover:bg-gray-400 text-gray-800 px-4 py-2 rounded-md",children:"Cancelar"})]})]})})]})}}},e=>{e.O(0,[441,255,358],()=>e(e.s=1751)),_N_E=e.O()}]);