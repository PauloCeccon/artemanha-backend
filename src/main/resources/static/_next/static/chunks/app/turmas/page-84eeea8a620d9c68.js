(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[129],{1751:(e,t,a)=>{Promise.resolve().then(a.bind(a,1961))},1961:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var s=a(5155),o=a(2115);let r="localhost"===window.location.hostname?"http://localhost:8080":"";function l(){let[e,t]=(0,o.useState)([]),[a,l]=(0,o.useState)(!1),[n,i]=(0,o.useState)(!1),[c,d]=(0,o.useState)(null),[u,m]=(0,o.useState)(null),[x,h]=(0,o.useState)(!1),[b,p]=(0,o.useState)({nome:"",curso:"",turno:"",situacao:""}),g=e=>{if(!e)return"";if(e.includes("/"))return e;let[t,a,s]=e.split("-");return t&&a&&s?"".concat(s,"/").concat(a,"/").concat(t):e},j=e=>e.map(e=>({...e,inicio:g(e.inicio),termino:g(e.termino)}));(0,o.useEffect)(()=>{fetch("".concat(r,"/api/turmas")).then(e=>e.json()).then(e=>t(j(e))).catch(console.error)},[]);let N=e=>{e?(d(e),i(!1)):(d({nome:"",nomeResumido:"",curso:"",periodo:"",situacao:"",turno:"",maximoAlunos:void 0,inicio:"",termino:""}),i(!0)),l(!0)},f=async()=>{t(j(await fetch("".concat(r,"/api/turmas")).then(e=>e.json())))},y=async()=>{if(!c)return;let e=e=>null==e||""===e.trim()?null:e,a={id:c.id,nome:e(c.nome),nomeResumido:e(c.nomeResumido),curso:e(c.curso),periodo:e(c.periodo),situacao:e(c.situacao),turno:e(c.turno),maximoAlunos:void 0===c.maximoAlunos||null===c.maximoAlunos||Number.isNaN(c.maximoAlunos)?null:Number(c.maximoAlunos),inicio:e(c.inicio),termino:e(c.termino)},s=c.id?"PUT":"POST",o=c.id?"".concat(r,"/api/turmas/").concat(c.id):"".concat(r,"/api/turmas");try{let e=await fetch(o,{method:s,headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(a)});if(!e.ok){let t=await e.text();throw console.error("Erro salvar turma:",e.status,t),Error("Erro ao salvar turma")}m(c.id?"✅ Turma atualizada com sucesso!":"\uD83C\uDF89 Turma criada com sucesso!"),l(!1);let n=await fetch("".concat(r,"/api/turmas")).then(e=>e.json()),i=e=>{if(!e)return"";if(e.includes("/"))return e;let[t,a,s]=e.split("-");return"".concat(s,"/").concat(a,"/").concat(t)};t(n.map(e=>({...e,inicio:i(e.inicio),termino:i(e.termino)}))),setTimeout(()=>m(null),4e3)}catch(e){console.error(e)}},v=async()=>{if(null==c?void 0:c.id)try{if(!(await fetch("".concat(r,"/api/turmas/").concat(c.id),{method:"DELETE"})).ok)throw Error("Erro ao excluir turma");m("\uD83D\uDDD1️ Turma exclu\xedda com sucesso!"),h(!1),l(!1),await f(),setTimeout(()=>m(null),4e3)}catch(e){console.error(e)}},w=e.filter(e=>(e.nome||"").toLowerCase().includes(b.nome.toLowerCase())&&(e.curso||"").toLowerCase().includes(b.curso.toLowerCase())&&(e.turno||"").toLowerCase().includes(b.turno.toLowerCase())&&(""===b.situacao||(e.situacao||"").toLowerCase()===b.situacao.toLowerCase()));return(0,s.jsxs)("main",{className:"p-10 font-sans min-h-screen bg-gradient-to-br from-gray-50 to-blue-50",children:[(0,s.jsxs)("div",{className:"max-w-7xl mx-auto bg-white rounded-2xl shadow-lg overflow-hidden",children:[(0,s.jsxs)("header",{className:"bg-blue-600 text-white p-6 flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold tracking-wide",children:"\uD83C\uDFEB Turmas"}),(0,s.jsx)("button",{onClick:()=>N(),className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-md transition-all",children:"+ Nova Turma"})]}),u&&(0,s.jsx)("div",{className:"text-center bg-green-100 text-green-700 py-2 font-medium",children:u}),(0,s.jsxs)("div",{className:"grid grid-cols-4 gap-4 p-4 bg-blue-50 border-b",children:[(0,s.jsx)("input",{placeholder:"Filtrar por nome",className:"p-2 rounded border",value:b.nome,onChange:e=>p({...b,nome:e.target.value})}),(0,s.jsx)("input",{placeholder:"Filtrar por curso",className:"p-2 rounded border",value:b.curso,onChange:e=>p({...b,curso:e.target.value})}),(0,s.jsx)("input",{placeholder:"Filtrar por turno",className:"p-2 rounded border",value:b.turno,onChange:e=>p({...b,turno:e.target.value})}),(0,s.jsx)("input",{placeholder:"Filtrar por situa\xe7\xe3o",className:"p-2 rounded border",value:b.situacao,onChange:e=>p({...b,situacao:e.target.value})})]}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full border-collapse",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-blue-100 text-blue-800",children:[(0,s.jsx)("th",{className:"p-3 text-left text-sm font-semibold",children:"Nome"}),(0,s.jsx)("th",{className:"p-3 text-left text-sm font-semibold",children:"Nome Resumido"}),(0,s.jsx)("th",{className:"p-3 text-left text-sm font-semibold",children:"Curso"}),(0,s.jsx)("th",{className:"p-3 text-left text-sm font-semibold",children:"Per\xedodo"}),(0,s.jsx)("th",{className:"p-3 text-left text-sm font-semibold",children:"Situa\xe7\xe3o"}),(0,s.jsx)("th",{className:"p-3 text-left text-sm font-semibold",children:"Turno"}),(0,s.jsx)("th",{className:"p-3 text-left text-sm font-semibold",children:"M\xe1x. de Alunos"}),(0,s.jsx)("th",{className:"p-3 text-left text-sm font-semibold",children:"In\xedcio"}),(0,s.jsx)("th",{className:"p-3 text-left text-sm font-semibold",children:"T\xe9rmino"}),(0,s.jsx)("th",{className:"p-3 text-center text-sm font-semibold",children:"A\xe7\xf5es"})]})}),(0,s.jsxs)("tbody",{children:[w.map((e,t)=>{var a;return(0,s.jsxs)("tr",{className:"transition-colors ".concat(t%2==0?"bg-white":"bg-blue-50"," hover:bg-blue-100"),children:[(0,s.jsx)("td",{className:"p-3",children:e.nome}),(0,s.jsx)("td",{className:"p-3",children:e.nomeResumido||"—"}),(0,s.jsx)("td",{className:"p-3",children:e.curso||"—"}),(0,s.jsx)("td",{className:"p-3",children:e.periodo||"—"}),(0,s.jsx)("td",{className:"p-3",children:e.situacao||"—"}),(0,s.jsx)("td",{className:"p-3",children:e.turno||"—"}),(0,s.jsx)("td",{className:"p-3",children:null!=(a=e.maximoAlunos)?a:"—"}),(0,s.jsx)("td",{className:"p-3",children:e.inicio||"—"}),(0,s.jsx)("td",{className:"p-3",children:e.termino||"—"}),(0,s.jsx)("td",{className:"p-3 text-center",children:(0,s.jsx)("button",{onClick:()=>N(e),className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded-md transition-all",children:"Visualizar"})})]},e.id)}),0===w.length&&(0,s.jsx)("tr",{children:(0,s.jsx)("td",{className:"p-4 text-center text-gray-500",colSpan:10,children:"Nenhuma turma encontrada."})})]})]})})]}),a&&c&&(0,s.jsx)("div",{className:"fixed inset-0 bg-gray-200/40 backdrop-blur-sm flex items-center justify-center transition-all duration-300",children:(0,s.jsxs)("div",{className:"bg-white w-[1000px] rounded-xl shadow-2xl p-8 max-h-[90vh] overflow-y-auto border border-gray-100",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-6 text-blue-700",children:"\uD83E\uDDFE Dados da Turma"}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-6",children:[{label:"Nome",key:"nome",type:"text"},{label:"Nome Resumido",key:"nomeResumido",type:"text"},{label:"Curso",key:"curso",type:"text"},{label:"Per\xedodo",key:"periodo",type:"text"},{label:"Situa\xe7\xe3o",key:"situacao",type:"text"},{label:"Turno",key:"turno",type:"text"},{label:"M\xe1ximo de alunos",key:"maximoAlunos",type:"number"},{label:"In\xedcio",key:"inicio",type:"datebr"},{label:"T\xe9rmino",key:"termino",type:"datebr"}].map(e=>{let{label:t,key:a,type:o}=e,r="",l=c[a];return r="number"===o?"number"==typeof l?l:"":String(null!=l?l:""),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:t}),(0,s.jsx)("input",{type:"number"===o?"number":"text",className:"p-2 border rounded w-full",value:r,disabled:!n,onChange:e=>{let t=e.target.value;if("number"===o)t=""===e.target.value?void 0:Number(e.target.value);else{let a;"datebr"===o&&((a=e.target.value.replace(/\D/g,"")).length>8&&(a=a.slice(0,8)),a.length>=5?a="".concat(a.slice(0,2),"/").concat(a.slice(2,4),"/").concat(a.slice(4)):a.length>=3&&(a="".concat(a.slice(0,2),"/").concat(a.slice(2))),t=a)}d({...c,[a]:t})}})]},a)})}),(0,s.jsxs)("div",{className:"flex justify-between mt-8",children:[(0,s.jsx)("div",{className:"flex gap-3",children:n?(0,s.jsx)("button",{onClick:y,className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-md",children:"Salvar"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>i(!0),className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md",children:"Editar"}),(0,s.jsx)("button",{onClick:()=>h(!0),className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-md",children:"Excluir"})]})}),(0,s.jsx)("button",{onClick:()=>l(!1),className:"bg-gray-400 hover:bg-gray-500 text-white px-4 py-2 rounded-md",children:"Fechar"})]})]})}),x&&(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black/40 z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-lg text-center w-96",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold mb-4",children:["Deseja realmente excluir a turma ",(0,s.jsx)("br",{}),(0,s.jsx)("span",{className:"font-bold text-red-600",children:null==c?void 0:c.nome}),"?"]}),(0,s.jsxs)("div",{className:"flex justify-center gap-4 mt-6",children:[(0,s.jsx)("button",{onClick:v,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-md",children:"Sim, excluir"}),(0,s.jsx)("button",{onClick:()=>h(!1),className:"bg-gray-300 hover:bg-gray-400 text-gray-800 px-4 py-2 rounded-md",children:"Cancelar"})]})]})})]})}}},e=>{e.O(0,[441,255,358],()=>e(e.s=1751)),_N_E=e.O()}]);