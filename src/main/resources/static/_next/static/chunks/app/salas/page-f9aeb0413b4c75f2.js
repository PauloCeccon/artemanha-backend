(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[953],{4277:(e,t,s)=>{Promise.resolve().then(s.bind(s,9333))},9333:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var a=s(5155),l=s(2115);let o="localhost"===window.location.hostname?"http://localhost:8080":"";function r(){let[e,t]=(0,l.useState)([]),[s,r]=(0,l.useState)(!1),[n,i]=(0,l.useState)(!1),[c,d]=(0,l.useState)(null),[u,m]=(0,l.useState)(null),[x,h]=(0,l.useState)(!1),[b,p]=(0,l.useState)({nome:"",curso:"",turno:"",situacao:""});(0,l.useEffect)(()=>{fetch("".concat(o,"/api/turmas")).then(e=>e.json()).then(e=>{t(e.map(e=>{let t=e=>e&&e.includes("-")?(()=>{let[t,s,a]=e.split("-");return"".concat(a,"/").concat(s,"/").concat(t)})():e||"";return{...e,inicio:t(e.inicio),termino:t(e.termino)}}))}).catch(console.error)},[]);let g=e=>{e?(d(e),i(!1)):(d({nome:"",nomeResumido:"",curso:"",periodo:"",situacao:"",turno:"",maximoAlunos:void 0,inicio:"",termino:""}),i(!0)),r(!0)},j=async()=>{if(!c)return;let e=c.id?"PUT":"POST",s=c.id?"".concat(o,"/api/turmas/").concat(c.id):"".concat(o,"/api/turmas");try{if(!(await fetch(s,{method:e,headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})).ok)throw Error("Erro ao salvar turma");m(c.id?"✅ Turma atualizada com sucesso!":"\uD83C\uDF89 Turma criada com sucesso!"),r(!1);let a=(await fetch("".concat(o,"/api/turmas")).then(e=>e.json())).map(e=>{let t=e=>e&&e.includes("-")?(()=>{let[t,s,a]=e.split("-");return"".concat(a,"/").concat(s,"/").concat(t)})():e||"";return{...e,inicio:t(e.inicio),termino:t(e.termino)}});t(a),setTimeout(()=>m(null),4e3)}catch(e){console.error(e)}},N=async()=>{if(null==c?void 0:c.id)try{if(!(await fetch("".concat(o,"/api/turmas/").concat(c.id),{method:"DELETE"})).ok)throw Error("Erro ao excluir turma");m("\uD83D\uDDD1️ Turma exclu\xedda com sucesso!"),h(!1),r(!1);let e=await fetch("".concat(o,"/api/turmas")).then(e=>e.json());t(e),setTimeout(()=>m(null),4e3)}catch(e){console.error(e)}},f=e.filter(e=>(e.nome||"").toLowerCase().includes(b.nome.toLowerCase())&&(e.curso||"").toLowerCase().includes(b.curso.toLowerCase())&&(e.turno||"").toLowerCase().includes(b.turno.toLowerCase())&&(""===b.situacao||(e.situacao||"").toLowerCase()===b.situacao.toLowerCase()));return(0,a.jsxs)("main",{className:"p-10 font-sans min-h-screen bg-gradient-to-br from-gray-50 to-blue-50",children:[(0,a.jsxs)("div",{className:"max-w-7xl mx-auto bg-white rounded-2xl shadow-lg overflow-hidden",children:[(0,a.jsxs)("header",{className:"bg-blue-600 text-white p-6 flex justify-between items-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold tracking-wide",children:"\uD83C\uDFEB Turmas"}),(0,a.jsx)("button",{onClick:()=>g(),className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-md transition-all",children:"+ Nova Turma"})]}),u&&(0,a.jsx)("div",{className:"text-center bg-green-100 text-green-700 py-2 font-medium",children:u}),(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-4 p-4 bg-blue-50 border-b",children:[(0,a.jsx)("input",{placeholder:"Filtrar por nome",className:"p-2 rounded border",value:b.nome,onChange:e=>p({...b,nome:e.target.value})}),(0,a.jsx)("input",{placeholder:"Filtrar por curso",className:"p-2 rounded border",value:b.curso,onChange:e=>p({...b,curso:e.target.value})}),(0,a.jsx)("input",{placeholder:"Filtrar por turno",className:"p-2 rounded border",value:b.turno,onChange:e=>p({...b,turno:e.target.value})}),(0,a.jsx)("input",{placeholder:"Filtrar por situa\xe7\xe3o",className:"p-2 rounded border",value:b.situacao,onChange:e=>p({...b,situacao:e.target.value})})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full border-collapse",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-blue-100 text-blue-800",children:[(0,a.jsx)("th",{className:"p-3 text-left text-sm font-semibold",children:"Nome"}),(0,a.jsx)("th",{className:"p-3 text-left text-sm font-semibold",children:"Nome Resumido"}),(0,a.jsx)("th",{className:"p-3 text-left text-sm font-semibold",children:"Curso"}),(0,a.jsx)("th",{className:"p-3 text-left text-sm font-semibold",children:"Per\xedodo"}),(0,a.jsx)("th",{className:"p-3 text-left text-sm font-semibold",children:"Situa\xe7\xe3o"}),(0,a.jsx)("th",{className:"p-3 text-left text-sm font-semibold",children:"Turno"}),(0,a.jsx)("th",{className:"p-3 text-left text-sm font-semibold",children:"M\xe1x. de Alunos"}),(0,a.jsx)("th",{className:"p-3 text-left text-sm font-semibold",children:"In\xedcio"}),(0,a.jsx)("th",{className:"p-3 text-left text-sm font-semibold",children:"T\xe9rmino"}),(0,a.jsx)("th",{className:"p-3 text-center text-sm font-semibold",children:"A\xe7\xf5es"})]})}),(0,a.jsxs)("tbody",{children:[f.map((e,t)=>{var s;return(0,a.jsxs)("tr",{className:"transition-colors ".concat(t%2==0?"bg-white":"bg-blue-50"," hover:bg-blue-100"),children:[(0,a.jsx)("td",{className:"p-3",children:e.nome}),(0,a.jsx)("td",{className:"p-3",children:e.nomeResumido||"—"}),(0,a.jsx)("td",{className:"p-3",children:e.curso||"—"}),(0,a.jsx)("td",{className:"p-3",children:e.periodo||"—"}),(0,a.jsx)("td",{className:"p-3",children:e.situacao||"—"}),(0,a.jsx)("td",{className:"p-3",children:e.turno||"—"}),(0,a.jsx)("td",{className:"p-3",children:null!=(s=e.maximoAlunos)?s:"—"}),(0,a.jsx)("td",{className:"p-3",children:e.inicio||"—"}),(0,a.jsx)("td",{className:"p-3",children:e.termino||"—"}),(0,a.jsx)("td",{className:"p-3 text-center",children:(0,a.jsx)("button",{onClick:()=>g(e),className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded-md transition-all",children:"Visualizar"})})]},e.id)}),0===f.length&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{className:"p-4 text-center text-gray-500",colSpan:10,children:"Nenhuma turma encontrada."})})]})]})})]}),s&&c&&(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-200/40 backdrop-blur-sm flex items-center justify-center transition-all duration-300",children:(0,a.jsxs)("div",{className:"bg-white w-[1000px] rounded-xl shadow-2xl p-8 max-h-[90vh] overflow-y-auto border border-gray-100",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-6 text-blue-700",children:"\uD83E\uDDFE Dados da Turma"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-6",children:[{label:"Nome",key:"nome"},{label:"Nome Resumido",key:"nomeResumido"},{label:"Curso",key:"curso"},{label:"Per\xedodo",key:"periodo"},{label:"Situa\xe7\xe3o",key:"situacao"},{label:"Turno",key:"turno"},{label:"M\xe1ximo de alunos",key:"maximoAlunos",type:"number"},{label:"In\xedcio",key:"inicio"},{label:"T\xe9rmino",key:"termino"}].map(e=>{var t;let{label:s,key:l,type:o}=e;return(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:s}),(0,a.jsx)("input",{type:o||"text",className:"p-2 border rounded w-full",value:String(null!=(t=c[l])?t:""),disabled:!n,onChange:e=>{let t;return d({...c,[l]:"maximoAlunos"===l?Number(e.target.value):"inicio"===l||"termino"===l?((t=e.target.value.replace(/\D/g,"")).length>8&&(t=t.slice(0,8)),t.length>=5?t="".concat(t.slice(0,2),"/").concat(t.slice(2,4),"/").concat(t.slice(4)):t.length>=3&&(t="".concat(t.slice(0,2),"/").concat(t.slice(2))),t):e.target.value})}})]},l)})}),(0,a.jsxs)("div",{className:"flex justify-between mt-8",children:[(0,a.jsx)("div",{className:"flex gap-3",children:n?(0,a.jsx)("button",{onClick:j,className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-md",children:"Salvar"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>i(!0),className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md",children:"Editar"}),(0,a.jsx)("button",{onClick:()=>h(!0),className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-md",children:"Excluir"})]})}),(0,a.jsx)("button",{onClick:()=>r(!1),className:"bg-gray-400 hover:bg-gray-500 text-white px-4 py-2 rounded-md",children:"Fechar"})]})]})}),x&&(0,a.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black/40 z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-lg text-center w-96",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold mb-4",children:["Deseja realmente excluir a turma ",(0,a.jsx)("br",{}),(0,a.jsx)("span",{className:"font-bold text-red-600",children:null==c?void 0:c.nome}),"?"]}),(0,a.jsxs)("div",{className:"flex justify-center gap-4 mt-6",children:[(0,a.jsx)("button",{onClick:N,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-md",children:"Sim, excluir"}),(0,a.jsx)("button",{onClick:()=>h(!1),className:"bg-gray-300 hover:bg-gray-400 text-gray-800 px-4 py-2 rounded-md",children:"Cancelar"})]})]})})]})}}},e=>{e.O(0,[441,255,358],()=>e(e.s=4277)),_N_E=e.O()}]);