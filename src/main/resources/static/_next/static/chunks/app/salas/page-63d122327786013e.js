(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[953],{4277:(e,t,s)=>{Promise.resolve().then(s.bind(s,9333))},9333:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var a=s(5155),l=s(2115);let o="localhost"===window.location.hostname?"http://localhost:8080":"";function r(){var e;let[t,s]=(0,l.useState)([]),[r,n]=(0,l.useState)(!1),[i,c]=(0,l.useState)(!1),[d,u]=(0,l.useState)(null),[m,x]=(0,l.useState)(null),[h,b]=(0,l.useState)({nome:"",curso:"",turno:"",situacao:""});(0,l.useEffect)(()=>{fetch("".concat(o,"/api/turmas")).then(e=>e.json()).then(e=>{s(e.map(e=>{let t=e=>e&&e.includes("-")?(()=>{let[t,s,a]=e.split("-");return"".concat(a,"/").concat(s,"/").concat(t)})():e||"";return{...e,inicio:t(e.inicio),termino:t(e.termino)}}))}).catch(console.error)},[]);let p=e=>{e?(u(e),c(!1)):(u({nome:"",nomeResumido:"",curso:"",periodo:"",situacao:"",turno:"",maximoAlunos:void 0,inicio:"",termino:""}),c(!0)),n(!0)},j=async()=>{if(!d)return;let e=d.id?"PUT":"POST",t=d.id?"".concat(o,"/api/turmas/").concat(d.id):"".concat(o,"/api/turmas");try{if(!(await fetch(t,{method:e,headers:{"Content-Type":"application/json"},body:JSON.stringify(d)})).ok)throw Error("Erro ao salvar turma");x(d.id?"✅ Turma atualizada com sucesso!":"\uD83C\uDF89 Turma criada com sucesso!"),n(!1);let a=(await fetch("".concat(o,"/api/turmas")).then(e=>e.json())).map(e=>{let t=e=>e&&e.includes("-")?(()=>{let[t,s,a]=e.split("-");return"".concat(a,"/").concat(s,"/").concat(t)})():e||"";return{...e,inicio:t(e.inicio),termino:t(e.termino)}});s(a),setTimeout(()=>x(null),4e3)}catch(e){console.error(e)}},g=t.filter(e=>(e.nome||"").toLowerCase().includes(h.nome.toLowerCase())&&(e.curso||"").toLowerCase().includes(h.curso.toLowerCase())&&(e.turno||"").toLowerCase().includes(h.turno.toLowerCase())&&(""===h.situacao||(e.situacao||"").toLowerCase()===h.situacao.toLowerCase())),N=e=>{let t=e.replace(/\D/g,"");return t.length>8&&(t=t.slice(0,8)),t.length>=5?t="".concat(t.slice(0,2),"/").concat(t.slice(2,4),"/").concat(t.slice(4)):t.length>=3&&(t="".concat(t.slice(0,2),"/").concat(t.slice(2))),t};return(0,a.jsxs)("main",{className:"p-10 font-sans min-h-screen bg-gradient-to-br from-gray-50 to-blue-50",children:[(0,a.jsxs)("div",{className:"max-w-7xl mx-auto bg-white rounded-2xl shadow-lg overflow-hidden",children:[(0,a.jsxs)("header",{className:"bg-blue-600 text-white p-6 flex justify-between items-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold tracking-wide",children:"\uD83C\uDFEB Turmas"}),(0,a.jsx)("button",{onClick:()=>p(),className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-md transition-all",children:"+ Nova Turma"})]}),m&&(0,a.jsx)("div",{className:"text-center bg-green-100 text-green-700 py-2 font-medium",children:m}),(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-4 p-4 bg-blue-50 border-b",children:[(0,a.jsx)("input",{placeholder:"Filtrar por nome",className:"p-2 rounded border",value:h.nome,onChange:e=>b({...h,nome:e.target.value})}),(0,a.jsx)("input",{placeholder:"Filtrar por curso",className:"p-2 rounded border",value:h.curso,onChange:e=>b({...h,curso:e.target.value})}),(0,a.jsx)("input",{placeholder:"Filtrar por turno",className:"p-2 rounded border",value:h.turno,onChange:e=>b({...h,turno:e.target.value})}),(0,a.jsx)("input",{placeholder:"Filtrar por situa\xe7\xe3o",className:"p-2 rounded border",value:h.situacao,onChange:e=>b({...h,situacao:e.target.value})})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full border-collapse",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-blue-100 text-blue-800",children:[(0,a.jsx)("th",{className:"p-3 text-left text-sm font-semibold",children:"Nome"}),(0,a.jsx)("th",{className:"p-3 text-left text-sm font-semibold",children:"Nome Resumido"}),(0,a.jsx)("th",{className:"p-3 text-left text-sm font-semibold",children:"Curso"}),(0,a.jsx)("th",{className:"p-3 text-left text-sm font-semibold",children:"Per\xedodo"}),(0,a.jsx)("th",{className:"p-3 text-left text-sm font-semibold",children:"Situa\xe7\xe3o"}),(0,a.jsx)("th",{className:"p-3 text-left text-sm font-semibold",children:"Turno"}),(0,a.jsx)("th",{className:"p-3 text-left text-sm font-semibold",children:"M\xe1x. de Alunos"}),(0,a.jsx)("th",{className:"p-3 text-left text-sm font-semibold",children:"In\xedcio"}),(0,a.jsx)("th",{className:"p-3 text-left text-sm font-semibold",children:"T\xe9rmino"}),(0,a.jsx)("th",{className:"p-3 text-center text-sm font-semibold",children:"A\xe7\xf5es"})]})}),(0,a.jsxs)("tbody",{children:[g.map((e,t)=>{var s;return(0,a.jsxs)("tr",{className:"transition-colors ".concat(t%2==0?"bg-white":"bg-blue-50"," hover:bg-blue-100"),children:[(0,a.jsx)("td",{className:"p-3",children:e.nome}),(0,a.jsx)("td",{className:"p-3",children:e.nomeResumido||"—"}),(0,a.jsx)("td",{className:"p-3",children:e.curso||"—"}),(0,a.jsx)("td",{className:"p-3",children:e.periodo||"—"}),(0,a.jsx)("td",{className:"p-3",children:e.situacao||"—"}),(0,a.jsx)("td",{className:"p-3",children:e.turno||"—"}),(0,a.jsx)("td",{className:"p-3",children:null!=(s=e.maximoAlunos)?s:"—"}),(0,a.jsx)("td",{className:"p-3",children:e.inicio||"—"}),(0,a.jsx)("td",{className:"p-3",children:e.termino||"—"}),(0,a.jsx)("td",{className:"p-3 text-center",children:(0,a.jsx)("button",{onClick:()=>p(e),className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded-md transition-all",children:"Visualizar"})})]},e.id)}),0===g.length&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{className:"p-4 text-center text-gray-500",colSpan:10,children:"Nenhuma turma encontrada."})})]})]})})]}),r&&d&&(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-200/40 backdrop-blur-sm flex items-center justify-center transition-all duration-300",children:(0,a.jsxs)("div",{className:"bg-white w-[1000px] rounded-xl shadow-2xl p-8 max-h-[90vh] overflow-y-auto border border-gray-100",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-6 text-blue-700",children:"\uD83E\uDDFE Dados da Turma"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Nome"}),(0,a.jsx)("input",{className:"p-2 border rounded w-full",value:d.nome||"",disabled:!i,onChange:e=>u({...d,nome:e.target.value})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Nome Resumido"}),(0,a.jsx)("input",{className:"p-2 border rounded w-full",value:d.nomeResumido||"",disabled:!i,onChange:e=>u({...d,nomeResumido:e.target.value})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Curso"}),(0,a.jsx)("input",{className:"p-2 border rounded w-full",value:d.curso||"",disabled:!i,onChange:e=>u({...d,curso:e.target.value})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Per\xedodo"}),(0,a.jsx)("input",{className:"p-2 border rounded w-full",value:d.periodo||"",disabled:!i,onChange:e=>u({...d,periodo:e.target.value})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Situa\xe7\xe3o"}),(0,a.jsx)("input",{className:"p-2 border rounded w-full",value:d.situacao||"",disabled:!i,onChange:e=>u({...d,situacao:e.target.value})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Turno"}),(0,a.jsx)("input",{className:"p-2 border rounded w-full",value:d.turno||"",disabled:!i,onChange:e=>u({...d,turno:e.target.value})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"M\xe1ximo de alunos"}),(0,a.jsx)("input",{type:"number",className:"p-2 border rounded w-full",value:null!=(e=d.maximoAlunos)?e:"",disabled:!i,onChange:e=>u({...d,maximoAlunos:""===e.target.value?void 0:Number(e.target.value)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"In\xedcio"}),(0,a.jsx)("input",{className:"p-2 border rounded w-full",value:d.inicio||"",disabled:!i,onChange:e=>u({...d,inicio:N(e.target.value)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"T\xe9rmino"}),(0,a.jsx)("input",{className:"p-2 border rounded w-full",value:d.termino||"",disabled:!i,onChange:e=>u({...d,termino:N(e.target.value)})})]})]}),(0,a.jsxs)("div",{className:"flex justify-between mt-8",children:[(0,a.jsx)("div",{className:"flex gap-3",children:i?(0,a.jsx)("button",{onClick:j,className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-md",children:"Salvar"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>c(!0),className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md",children:"Editar"}),(0,a.jsx)("button",{onClick:async()=>{if((null==d?void 0:d.id)&&confirm('Deseja realmente excluir a turma "'.concat(d.nome,'"?')))try{if(!(await fetch("".concat(o,"/api/turmas/").concat(d.id),{method:"DELETE"})).ok)throw Error("Erro ao excluir turma");x("\uD83D\uDDD1️ Turma exclu\xedda com sucesso!"),n(!1);let e=await fetch("".concat(o,"/api/turmas")).then(e=>e.json());s(e),setTimeout(()=>x(null),4e3)}catch(e){console.error(e)}},className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-md",children:"Excluir"})]})}),(0,a.jsx)("button",{onClick:()=>n(!1),className:"bg-gray-400 hover:bg-gray-500 text-white px-4 py-2 rounded-md",children:"Fechar"})]})]})})]})}}},e=>{e.O(0,[441,255,358],()=>e(e.s=4277)),_N_E=e.O()}]);